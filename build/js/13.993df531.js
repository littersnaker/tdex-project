webpackJsonp([13],{100:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=a(2),c=a(0),l=a.n(c),s=a(7),u=a(24),d=a(9),p=a(5),m=a(239),f=a(12),v=a(148),y=a.n(v),h=a(135),g=a.n(h),b=a(240),E=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),_=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.isMobile=a.props.isMobile,a.state={channel:"",token:""},a}return r(t,e),E(t,[{key:"componentWillMount",value:function(){var e=this.props.location.query.token,t=this.props.location.query.channel;e&&this.setState({channel:t,token:e})}},{key:"render",value:function(){var e=this.state,t=e.channel,a=e.token;return"activity"==t||a?l.a.createElement(k,{token:a,isMobile:this.isMobile,isActivity:this.props.isActivity}):l.a.createElement(w,{token:a})}}]),t}(u.a);t.default=_;var w=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={activate:!1,error:""},a}return r(t,e),E(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.token;d.a.httpRequest("user/activate",{Token:t},function(t){0==t.Status||10013==t.Status?e.setState({activate:!0,error:""}):t.Data?e.setState({activate:!0,error:Object(p.d)(t.Error,t.Data)}):e.setState({activate:!0,error:t.Error})},this)}},{key:"turnToLogin",value:function(){s.a.replace("/login")}},{key:"render",value:function(){var e=this,t=this.state,a=t.activate,n=t.error;return l.a.createElement("div",{className:"register-contain pos-r"},l.a.createElement("div",{className:"pdt-1 mediaHight"},l.a.createElement("form",{className:"regist-box login-web"},l.a.createElement("div",{className:"emailVerification_web"},l.a.createElement("div",{className:"emailVerification"},l.a.createElement("div",{className:"tc fem-175 login-title"},l.a.createElement("span",{className:"logo"}),l.a.createElement("span",{className:"pdl-10"},o.a.lang("activateSucc.1_6"))),l.a.createElement("div",{className:"land_text send-txt tc pdb-50"},a&&!n&&l.a.createElement("p",null,l.a.createElement("span",null,o.a.lang("register.activated")),l.a.createElement("a",{href:"javascript:;",onClick:function(){return e.turnToLogin()}},l.a.createElement("span",{className:"green4 pdl-5"},o.a.lang("activateSucc.1_6")))),a&&!!n&&l.a.createElement("p",null,l.a.createElement("span",null,n))))))))}}]),t}(u.a),k=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.userInfo=null,a.state={viewInfo:{},inviteLink:"",Uid:"",showPoster:!1},a}return r(t,e),E(t,[{key:"componentWillMount",value:function(){this.props.token?this.activateAccount():this.setInviteLink()}},{key:"activateAccount",value:function(){var e=this,t=this.props.token;d.a.httpRequest("user/activate",{Token:t},function(t){0==t.Status||10013==t.Status?(e.userInfo=t.Data,f.a.registerAfter(t),e.setState({activate:!0,error:""})):t.Data?e.setState({activate:!0,error:Object(p.d)(t.Error,t.Data)}):e.setState({activate:!0,error:t.Error}),e.setInviteLink()},this)}},{key:"setInviteLink",value:function(){var e=f.a.getRegisterData();if(e&&e.Uid){var t=window.location.origin+"/register?ref="+e.Uid;this.setState({inviteLink:t,Uid:e.Uid}),this.userInfo=e}}},{key:"componentDidMount",value:function(){document.documentElement.scrollTop=0;var e=new y.a(".copy_link_btn");e.on("success",function(e){Object(p.g)(o.a.lang("Recharge.120"),0,1e3)}),e.on("error",function(e){console.log(e)}),this.clipboard=e}},{key:"componentWillUnmount",value:function(){this.clipboard&&this.clipboard.destroy()}},{key:"toLogin",value:function(){s.a.replace("/login")}},{key:"toInvite",value:function(){s.a.replace({pathname:"/login",query:{return_to:"/invite"}})}},{key:"createPoster",value:function(){this.setState({showPoster:!this.state.showPoster})}},{key:"closePoster",value:function(){this.createPoster()}},{key:"render",value:function(){var e=this,t=this.state,a=t.inviteLink,n=t.Uid,i=t.showPoster,r=this.props,c=r.token,s=r.isMobile,u=r.isActivity,d=s?98:160;return i?l.a.createElement(b.a,{className:"poster-box",uid:n,onClick:function(){return e.closePoster()}}):l.a.createElement("div",{className:"okk-trade-contain"},l.a.createElement("div",{className:"activity-successful media-contain"},l.a.createElement("div",{className:"contain"},l.a.createElement("div",{className:"verify-successful"},l.a.createElement("i",{className:"iconfont icon-success"}),l.a.createElement("h3",null,o.a.lang("activity.registered.1")),u&&l.a.createElement("p",null,o.a.lang("activity.registered.2")),l.a.createElement("button",{onClick:function(){return e.toLogin()}},o.a.lang("activity.registered.3"))),l.a.createElement("div",{className:"activity-recom"},l.a.createElement("div",{className:"activity-code "+o.a.curLang,onClick:this.toInvite.bind(this)},l.a.createElement("p",null,o.a.lang("activity.registered.17")),l.a.createElement("p",null,o.a.lang("activity.registered.18")),l.a.createElement("p",{dangerouslySetInnerHTML:{__html:o.a.lang("activity.registered.19")}})),c?l.a.createElement("div",{className:"activity-qr"},l.a.createElement("div",{className:"activity-qr-code"},l.a.createElement(g.a,{value:a,size:d}),l.a.createElement("p",null,o.a.lang("activity.registered.4"))),l.a.createElement("div",{className:"activity-share"},l.a.createElement("p",null,o.a.lang("activity.registered.5")),l.a.createElement("p",{className:"share-link"},l.a.createElement("input",{className:"w-60",id:"copy_invit_code",value:n,readOnly:"readonly",onChange:function(){}}),l.a.createElement("span",{className:"activity-copy copy_link_btn","data-clipboard-action":"copy","data-clipboard-target":"#copy_invit_code"},l.a.createElement("i",{className:"iconfont icon-copy"}))),l.a.createElement("p",null,o.a.lang("activity.registered.6")),l.a.createElement("p",{className:"share-link"},l.a.createElement("input",{id:"copy_invit_text",value:a,readOnly:"readonly",onChange:function(){}}),l.a.createElement("span",{className:"activity-copy copy_link_btn","data-clipboard-action":"copy","data-clipboard-target":"#copy_invit_text"},l.a.createElement("i",{className:"iconfont icon-copy"}))),l.a.createElement("p",null,o.a.lang("activity.registered.7")),n&&l.a.createElement(m.a,{userInfo:this.userInfo}))):l.a.createElement("div",{className:"activity-qr qr"+o.a.curLang},l.a.createElement("div",{className:"activity-qr-code"},l.a.createElement(g.a,{value:a,size:98}),l.a.createElement("p",null,o.a.lang("activity.registered.4"))),l.a.createElement("div",{className:"activity-share"},l.a.createElement("p",null,o.a.lang("activity.registered.5")," ",l.a.createElement("span",null,n)),l.a.createElement("div",{className:"activity-share-box"},l.a.createElement("p",null,o.a.lang("activity.registered.7")),n&&l.a.createElement("div",null,l.a.createElement(m.a,{userInfo:this.userInfo,styleObject:{display:"inline-block",verticalAlign:"top"}}),l.a.createElement("span",{style:{verticalAlign:"middle"}},l.a.createElement("input",{style:{position:"fixed",left:"-10000px",top:"-10000px"},id:"copy_url",value:a,readOnly:"readonly",onChange:function(){}}),l.a.createElement("span",{className:"activity-copy copy_link_btn","data-clipboard-action":"copy","data-clipboard-target":"#copy_url"})))),l.a.createElement("input",{id:"copy_invit_text",className:"hide",value:a,readOnly:"readonly"}),l.a.createElement("button",{className:"activity-copy copy_link_btn point","data-clipboard-action":"copy","data-clipboard-target":"#copy_invit_text",style:{marginRight:"5px",padding:"5px",lineHeight:"inherit"}},o.a.lang("activity.registered.btn")),s&&l.a.createElement("button",{className:"point",onClick:function(){return e.createPoster()}},o.a.lang("activity.registered.posters"))))))))}}]),t}(u.a)},239:function(e,t,a){"use strict";(function(e){function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a(2),c=a(0),l=a.n(c),s=a(24),u=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),d=function(t){function a(e){n(this,a);var t=i(this,(a.__proto__||Object.getPrototypeOf(a)).call(this,e));return t.userInfo=t.props.userInfo||{},t.bdStyle=t.props.styleObject||{},t.state={lang:o.a.getLang()},t}return r(a,t),u(a,[{key:"componentWillMount",value:function(){}},{key:"componentWillReceiveProps",value:function(){o.a.getLang()!==this.state.lang&&(this.setState({lang:o.a.getLang()}),window.location.hash="lang="+o.a.getLang())}},{key:"componentDidMount",value:function(){var t=this.userInfo;/MicroMessenger/i.test(navigator.userAgent)?window.location.hash="return_to="+window.location.origin+"/register?ref="+t.Uid+"&channel=weixin&uid="+t.Uid:window.location.hash="lang="+o.a.getLang(),window._bd_share_config={common:{bdSnsKey:{},bdText:"",bdMini:"2",bdPic:"",bdStyle:"0",bdSize:"16",onBeforeClick:function(a,n){return"fbook"===a&&e('meta[name="description"]').attr("content",o.a.lang("bdshare.content")),{bdText:o.a.lang("bdshare.content"),bdUrl:window.location.origin+"/register?ref="+t.Uid+"&channel="+a+"&uid="+t.Uid}}},share:{},image:{viewList:["qzone","tsina","tqq","renren","weixin"],viewText:"",viewSize:"16"}},window._bd_share_main?window._bd_share_main.init():e("body").append("<script>with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='/static/api/js/share.js?cdnversion='+~(-new Date()/36e5)];<\/script>")}},{key:"render",value:function(){return l.a.createElement("div",{className:"bdsharebuttonbox",style:this.bdStyle},l.a.createElement("a",{href:"javascript:;",className:"bds_tsina","data-cmd":"tsina",title:" "}),l.a.createElement("a",{href:"javascript:;",className:"bds_weixin","data-cmd":"weixin",title:" "}),l.a.createElement("a",{href:"javascript:;",className:"bds_fbook","data-cmd":"fbook",title:" "}),l.a.createElement("a",{href:"javascript:;",className:"bds_twi","data-cmd":"twi",title:" "}))}}]),a}(s.a);t.a=d}).call(t,a(13))},240:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var o=a(0),c=a.n(o),l=a(24),s=a(135),u=a.n(s),d=a(12),p=a(2),m=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),f=function(e){function t(e){n(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.posterLink=window.location.origin+"/register",a.state={},a}return r(t,e),m(t,[{key:"componentWillMount",value:function(){var e=this.props.uid||d.a.getRegisterData().Uid;e&&(this.posterLink=window.location.origin+"/register?ref="+e)}},{key:"componentDidMount",value:function(){var e=document.getElementById("introduce-canvas"),t=document.getElementById("qr-wrap-canvas"),a=document.body.clientWidth,n=document.body.clientHeight;e.width=2*a,e.height=2*n,e.style.width=a,e.style.height=n;var i=document.getElementById("c-bg"),r=document.getElementById("qrCode"),o=r.clientWidth,c=r.clientHeight;t.width=o+20,t.height=c+20;var l=e.getContext("2d"),s=t.getContext("2d");s.fillStyle="#fff",s.fillRect(0,0,o+20,c+20),s.drawImage(r,10,10,o,c),i.onload=function(){var r=Math.round(document.body.clientWidth/3.763),o=Math.round(document.body.clientHeight/3.345);console.log(r,o),l.drawImage(i,0,0,2*a,2*n),l.drawImage(t,a-r,2*n-o-3*(r-10),2*r,2*r);var c=e.toDataURL("image/png"),s=document.getElementById("c-img");s.src=c,s.style.width="100%"}}},{key:"close",value:function(){this.props.onClick()}},{key:"render",value:function(){var e=this,t=this.props.className;return c.a.createElement("div",{className:t},c.a.createElement(u.a,{value:this.posterLink,size:Math.round(document.body.clientWidth/3.763),id:"qrCode",style:{opacity:0,position:"absolute"}}),c.a.createElement("img",{src:window.location.origin+"/images/invite/share.png?"+Math.random(),id:"c-bg",style:{display:"none"}}),c.a.createElement("canvas",{id:"introduce-canvas",style:{display:"none"}}),c.a.createElement("canvas",{id:"qr-wrap-canvas",style:{opacity:0,position:"absolute"}}),c.a.createElement("img",{id:"c-img"}),c.a.createElement("div",{className:"poster-close",onClick:function(){return e.close()}},c.a.createElement("i",{className:"iconfont icon-close fem15"})),c.a.createElement("div",{className:"poster-tip"},p.a.lang("activity.registered.posters2")))}}]),t}(l.a);t.a=f}});