webpackJsonp([22],{108:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function n(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function l(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(0),c=a.n(s),o=a(24),i=a(9),u=a(25),m=a(27),f=a(18),d=a(15),h=a(26),p=a(5),g=a(130),E=a(79),v=a(132),y=a(16),N=a(2),b=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),T=function e(t,a,r){null===t&&(t=Function.prototype);var n=Object.getOwnPropertyDescriptor(t,a);if(void 0===n){var l=Object.getPrototypeOf(t);return null===l?void 0:e(l,a,r)}if("value"in n)return n.value;var s=n.get;if(void 0!==s)return s.call(r)},k=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.isMobile=e.isMobile,a.askTimer=null,a.refer=!1,a.query=0,a.CoinsMap={},a.Products=[],a.state={Codes:"",recCodes:"",cnyRate:null,Rate:"--",balance:null,FeeNum:0,showPro:!1,errData:["","","",""],safeBind:!1,refreshLog:!1,showLog:!1},a}return l(t,e),b(t,[{key:"componentWillUnmount",value:function(){this.closeTimer(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"loadSafeInfo",value:function(){if(this.state.hasBind)return!0;var e=f.a.getUserInfo(),t=!1;return(e.GgAuth||e.Mobile)&&(this.setState({safeBind:!0}),t=!0),t}},{key:"componentDidMount",value:function(){this.refer&&(document.documentElement.scrollTop=document.body.scrollHeight),this.changeProductPrice()}},{key:"queryHandle",value:function(){var e=this.props.location.query,t=e.currency,a=e.refer;if(a&&(this.refer=a),this.query==t)return!1;this.query=t}},{key:"componentWillMount",value:function(){this.queryHandle(),this.loadCodesList()}},{key:"loadCodesList",value:function(){var e=m.a.getProductCoins(),t=this;e?this.saveProducts(e):m.a.loadProductCoins(null,function(e){e&&t.saveProducts(e.List)},this)}},{key:"resetCoinsMap",value:function(e){var t={};e.forEach(function(e){t[e.Id]=e}),this.CoinsMap=t}},{key:"saveProducts",value:function(e){var t=this;if(!e)return[];this.resetCoinsMap(e);var a=[],r={USDT:1,BTC:1},n=null;e.forEach(function(e,l){r[e.Code]&&a.push(e),"TD"==e.Code&&(t.getWalletBalance(e.Id),n=e)}),this.Products=a,a[0]&&this.setState({recCodes:this.Products[0],Codes:n})}},{key:"getWalletBalance",value:function(e){var t=this,a=this;i.a.httpRequest("wallet/balance",{Currency:Number(e),Type:Number(y.a.WALLET.TYPE.SPOT)},function(e){if(0==e.Status){var r=e.Data;a.setState({balance:r,showPro:!1})}else a.setState({balance:null});t.loadSafeInfo()},this)}},{key:"getExchangePrice",value:function(){var e=this;i.a.httpRequest("product/price",null,function(t){if(0==t.Status){var a=t.Data;if(a){var r=d.a.accMul(a.BTCUSD.Price,a.USDCNY.Price,4),n={BTC:r,USDT:a.USDCNY.Price};e.setState({cnyRate:n})}}},this)}},{key:"afterTradeRefresh",value:function(){var e=this.state.Codes;this.getWalletBalance(e.Id)}},{key:"changeProductPrice",value:function(){var e=this;setTimeout(function(){e.loadPrice(),e.getExchangePrice()},200)}},{key:"closeTimer",value:function(){this.askTimer&&(clearInterval(this.askTimer),this.askTimer=null)}},{key:"loadPrice",value:function(){var e=this;this.closeTimer(),this.askTimer=setInterval(function(){e.getExchangePrice()},3e5)}},{key:"resetData",value:function(){var e={errData:["","","",""],FeeNum:0,Rate:"--"};this.refs.tradeNum.value="",this.refs.tfNum.value="",this.setState(e)}},{key:"changeProduct",value:function(e){var t=this;if(!e||e==this.state.recCodes.Id)return!1;this.Products.forEach(function(a,r){e==a.Id&&(t.setState({recCodes:a}),t.resetData())})}},{key:"toggleProduct",value:function(e){e.stopPropagation(),this.setState({showPro:!this.state.showPro})}},{key:"closeProduct",value:function(e){e.stopPropagation(),this.state.showPro&&this.setState({showPro:!1})}},{key:"resetError",value:function(){this.setState({errData:["","","",""]})}},{key:"checkUidErr",value:function(e){var t=this.refs.tfUid.value,a=0,r="",n=this.props.uInfo,l=this.state.errData;return isNaN(t)?(a=1,r=N.a.lang("Withdrawals.correct_input")):t?!l[1]&&!e||/^[0-9]{8}$/.test(t)?t==n.AccountId&&(a=1,r=N.a.lang("Transfer.youSelf")):(a=1,r=N.a.lang("Withdrawals.correct_input")):(a=1,r=N.a.lang("form.error.empty")),l[1]=r,this.setState({errData:l}),a}},{key:"checkEmailErr",value:function(){var e=this.refs.tfEmail.value,t=this.state.errData,a=0,r="",n=this.props.uInfo,l=v.a.email(e);return e?l?e==n.Email&&(a=2,r=N.a.lang("Transfer.youSelf")):(a=2,r=N.a.lang("Withdrawals.correct_input")):(a=2,r=N.a.lang("form.error.empty")),t[2]=r,this.setState({errData:t}),a}},{key:"checkMoney",value:function(e){var t=this.state,a=t.balance,r=t.errData,n=0,l="",s=!1,c=this.walletCounts(a),o=this.refs.tfNum.value,i=0;0==e&&(o=this.refs.tradeNum.value,i=10,s=!0);var u=Number(o);return o?isNaN(u)?(n=3,l=N.a.lang("Withdrawals.correct_input")):u<i?(n=3,l=N.a.lang("Transfer.error.min",i)):s&&!/^\d+$/.test(u)?(n=3,l=N.a.lang("Transfer.error.float")):/^(-?\d+)(\.\d{1,4})?$/.test(u)?s&&c.canUse<u&&(n=3,l=N.a.lang("Withdrawals.error.maxWith")):(n=3,l=N.a.lang("Withdrawals.error.maxFloat",4)):(n=3,l=N.a.lang("form.error.empty")),r[e]=l,this.setState({errData:r}),n}},{key:"checkHadEmpty",value:function(){return!!this.checkMoney(0)||(!!this.checkUidErr(!0)||(!!this.checkEmailErr()||(!!this.checkMoney(3)||(this.resetError(),!1))))}},{key:"handleSubmit",value:function(e){return e.stopPropagation(),e.preventDefault(),this.state.safeBind?this.state.Codes?!this.checkHadEmpty()&&void this.popVerify():(Object(p.g)(N.a.lang("common.not_open"),!0),!1):(Object(p.g)(N.a.lang("Withdrawals.119"),!0),!1)}},{key:"popVerify",value:function(){var e=this;h.a.open(c.a.createElement(E.default,{path:"disTips",verify:"normal",onChange:function(t){return e.popCallback(t)},datafor:"transfer"}),"simple_lang")}},{key:"popCallback",value:function(e){if("close"==e)return void h.a.close();this.walletWithdraw(e)}},{key:"walletWithdraw",value:function(e){var t=this.state,a=t.Codes,r=t.recCodes,n=t.refreshLog;e.Currency=Number(a.Id),e.Amount=Number(this.refs.tradeNum.value),e.AccountId=Number(this.refs.tfUid.value),e.Email=this.refs.tfEmail.value,e.Target=Number(r.Id),e.TargetAmount=Number(this.refs.tfNum.value);var l=this;i.a.httpRequest("wallet/transfer",e,function(e){if(0==e.Status){h.a.close();var t=e.Data;l.setState({balance:t,refreshLog:!n}),Object(p.g)(N.a.lang("Transfer.success"))}},this)}},{key:"checkTradeVal",value:function(e){this.checkMoney(e)||this.setTdRate()}},{key:"setTdRate",value:function(){var e=this.state,t=e.cnyRate,a=e.recCodes;if(!t)return!1;var r=a.Code,n=t[r],l=Number(this.refs.tradeNum.value),s=Number(this.refs.tfNum.value);if(l&&s>=0){var c=d.a.accDiv(d.a.accMul(s,n,4),l,4);this.setState({Rate:c})}}},{key:"setMaxWith",value:function(e,t){t.stopPropagation(),this.refs.tradeNum.value=Number(e)}},{key:"setFeeNum",value:function(){var e=this.state.Codes,t=0;if(e){e.TransferFee&&(t=e.TransferFee);this.checkMoney()||this.setState({FeeNum:t})}}},{key:"getActual",value:function(e,t){var a=this.refs.tfNum;if(!a)return!1;var r=Number(a.value),n=0;if(!isNaN(r)){if(r>e||r<=t)return 0;n=Number(d.a.accSubtr(r,t))}return n}},{key:"walletCounts",value:function(e){var t=0;return e&&(t=Number(e.Lock)||0),{Counts:0,Freeze:0,canUse:t,canTransfer:0}}},{key:"showLog",value:function(e){this.setState({showLog:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.balance,r=t.Codes,n=t.recCodes,l=t.Rate,s=t.showPro,o=t.errData,i=t.safeBind,m=t.refreshLog,f=t.showLog,h=this.props.uInfo,p="0.0000",g="";if(n&&(g=n.Code),a){var E=this.walletCounts(a);p=d.a.format(E.canUse,4).toString()}return c.a.createElement("div",{className:"okk-trade-contain",onClick:function(t){return e.closeProduct(t)}},c.a.createElement("div",{className:"contain pdb-50"},c.a.createElement("div",{className:"withdrawal"},c.a.createElement("div",{className:"w-head-top m-head-top",onClick:this.resetData.bind(this)},c.a.createElement("h3",{onClick:function(){return e.showLog(!1)},className:"fl "+(f?"m-under-l":"")},N.a.lang("Asset.102")),c.a.createElement("h3",{onClick:function(){return e.showLog(!0)},className:"pc-hide fr "+(f?"":"m-under-l")},N.a.lang("Recharge.log"))),c.a.createElement("div",{className:0==f?"currency_left transfer-box":"currency_left transfer-box m-hide"},c.a.createElement("form",{className:"manage-address-bos transfer-form wp-100",onSubmit:function(t){e.handleSubmit(t)},autoComplete:"off"},c.a.createElement("dl",{className:"form-box f-clear"},c.a.createElement("dt",null,N.a.lang("Transfer.accountId"),N.a.lang("common.symbol.colon")),c.a.createElement("dd",null,c.a.createElement("span",{className:"c-8"},h.AccountId))),c.a.createElement("dl",{className:"form-box f-clear mt-20 lh-40 pos-r"},c.a.createElement("dt",null,N.a.lang("Transfer.asset.text3"),N.a.lang("common.symbol.colon")),c.a.createElement("dd",{className:"f-clear"},c.a.createElement("div",{className:"numberBox pos-r w435-h40 m-w100_ "+(o[0]?"bd-err":"")},c.a.createElement("input",{type:"text",className:"w435-h40 m-w100_  fem",ref:"tradeNum",onChange:function(){return e.checkTradeVal(0)},placeholder:N.a.lang("tradeInfo.2_25"),maxLength:"15"}),c.a.createElement("div",{className:"transfer-money",onClick:function(t){return e.setMaxWith(p,t)}},c.a.createElement("span",{className:"pdr-10 tb"},"TD"),N.a.lang("Withdrawals.103"),c.a.createElement("span",null,p)))),c.a.createElement("dd",null,""!=o[0]&&c.a.createElement("span",{className:"fem75 red1 pdl-10"},"*",o[0]))),c.a.createElement("dl",{className:"form-box f-clear mt-20 lh-40"},c.a.createElement("dt",null,N.a.lang("Transfer.uid"),N.a.lang("common.symbol.colon")),c.a.createElement("dd",null,c.a.createElement("div",{className:"numberBox  w435-h40 m-w100_  "+(o[1]?"bd-err":"")},c.a.createElement("input",{className:" w435-h40 m-w100_  fem",type:"text",ref:"tfUid",onFocus:function(){return e.checkMoney(0)},onChange:function(){return e.checkUidErr()},placeholder:N.a.lang("Transfer.input_uid")}))),c.a.createElement("dd",null,""!=o[1]&&c.a.createElement("span",{className:"fem75 red1 pdl-10"},"*",o[1]))),c.a.createElement("dl",{className:"form-box f-clear mt-20 lh-40"},c.a.createElement("dt",null,N.a.lang("Transfer.asset"),N.a.lang("common.symbol.colon")),c.a.createElement("dd",null,c.a.createElement("div",{className:"numberBox  w435-h40 m-w100_  "+(o[2]?"bd-err":"")},c.a.createElement("input",{className:" w435-h40 m-w100_  fem",type:"text",ref:"tfEmail",onFocus:function(t){return e.checkUidErr(t)},onBlur:function(){return e.checkEmailErr()},placeholder:N.a.lang("Transfer.input_email")}))),c.a.createElement("dd",null,""!=o[2]&&c.a.createElement("span",{className:"fem75 red1 pdl-10"},"*",o[2]))),c.a.createElement("dl",{className:"form-box f-clear mt-20 lh-40"},c.a.createElement("dt",null,N.a.lang("Transfer.asset.text6"),N.a.lang("common.symbol.colon")),c.a.createElement("dd",{className:"w435-h40 f-clear"},c.a.createElement("div",{className:"numberBox fl w300-h40 m-w100_  "+(o[3]?"bd-err":"")},c.a.createElement("input",{className:"w300-h40 m-w100_  fem",type:"text",ref:"tfNum",onFocus:function(){return e.checkEmailErr()},onChange:function(){return e.checkTradeVal(3)},placeholder:N.a.lang("tradeInfo.2_25"),maxLength:"15"})),!this.isMobile&&c.a.createElement("div",{className:"pos-r w-125 fr"},c.a.createElement("div",{className:"select numberBox",onClick:function(t){return e.toggleProduct(t)}},c.a.createElement("div",{className:"currency_pic"}),c.a.createElement("div",{className:"currency_text"},c.a.createElement("h4",null,g)),c.a.createElement("div",{className:"triangle"},c.a.createElement("i",{className:0==s?"iconfont icon-dropDown c-8":"iconfont icon-dropUp c-8"}))),s&&c.a.createElement(C,{products:this.Products,onChange:function(t){return e.changeProduct(t)}}))),c.a.createElement("dd",null,""!=o[3]&&c.a.createElement("span",{className:"fem75 red1 pdl-10"},"*",o[3]))),this.isMobile&&c.a.createElement("dl",{className:"form-box f-clear mt-20 lh-40"},c.a.createElement("dt",null,N.a.lang("Transfer.asset.text5"),N.a.lang("common.symbol.colon")),c.a.createElement("dd",{className:"w435-h40 f-clear"},c.a.createElement("div",{className:"pos-r w435-h40 m-w100_ fr"},c.a.createElement("div",{className:"select numberBox",onClick:function(t){return e.toggleProduct(t)}},c.a.createElement("div",{className:"currency_pic"}),c.a.createElement("div",{className:"currency_text"},c.a.createElement("h4",null,g)),c.a.createElement("div",{className:"triangle"},c.a.createElement("i",{className:0==s?"iconfont icon-dropDown c-8":"iconfont icon-dropUp c-8"}))),s&&c.a.createElement(C,{products:this.Products,onChange:function(t){return e.changeProduct(t)}})))),c.a.createElement("dl",{className:"form-box f-clear mt-10"},c.a.createElement("dt",null,"\xa0"),c.a.createElement("dd",{className:"c-8"},c.a.createElement("p",null,c.a.createElement("span",null,"1TD"),c.a.createElement("span",{className:"pd-5"}," \u2248 "),c.a.createElement("span",{ref:"ratePrice"},l),"CNY"))),c.a.createElement("dl",{className:"form-box f-clear mt-30 mb-30 lh-40"},c.a.createElement("dt",null,"\xa0"),c.a.createElement("dd",null,c.a.createElement("button",{className:"btn btn-yellow fem125  w435-h40 m-w100_  "+(i&&r?"":"btnNotAllow")},N.a.lang("Transfer.transfer")))),!i&&c.a.createElement("dl",{className:"form-box last-form-box f-clear fem75 mt-15"},c.a.createElement("dt",null,"\xa0"),c.a.createElement("dd",null,c.a.createElement(u.Link,{className:"green4 fs14 cursor pdl-20 warn",to:"/personal"},N.a.lang("Withdrawals.119"))))),c.a.createElement("div",{className:"attention"},c.a.createElement("h4",null,N.a.lang("Recharge.tips")),c.a.createElement("ul",null,c.a.createElement("li",null,c.a.createElement("p",null,N.a.lang("Transfer.tips.txt5"))),c.a.createElement("li",null,c.a.createElement("p",null,N.a.lang("Transfer.tips.txt1"))),c.a.createElement("li",null,c.a.createElement("p",null,N.a.lang("Transfer.tips.txt3","10 TD"))),c.a.createElement("li",null,c.a.createElement("p",null,N.a.lang("Transfer.tips.txt4","30")))))),c.a.createElement("div",{className:1==!f?"m-hide":"transfer-log-box"},c.a.createElement(w,{product:r,safe:i,coinsMap:this.CoinsMap,refresh:m,onChange:function(){return e.afterTradeRefresh()}})))))}}]),t}(o.a);t.default=k;var C=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.state={},a}return l(t,e),b(t,[{key:"changeProduct",value:function(e){this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=this.props.products;return c.a.createElement("div",{className:"select_option"},c.a.createElement("ul",null,c.a.createElement("li",{className:"h-50 tc hide"},c.a.createElement("div",{className:"select_option_ipt"},c.a.createElement("input",{type:"text",name:"",id:"",value:"",placeholder:""}))),t&&t.map(function(t,a){return c.a.createElement("li",{key:a,onClick:function(){return e.changeProduct(t.Id)}},c.a.createElement("div",{className:"currency_pic"}),c.a.createElement("div",{className:"currency_text"},c.a.createElement("h4",null,t.Code)))}),!t&&!t.length&&c.a.createElement("li",{className:"tc"},c.a.createElement("div",{className:"currency_text c-8"},c.a.createElement("h4",null,N.a.lang("bank.1_27"))))))}}]),t}(o.a),w=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.safeBind=e.safe,a.CoinsMap=null,a.refresh=!1,a.product=null,a.state={curPage:1,historyList:{List:[],PageSize:10}},a}return l(t,e),b(t,[{key:"componentWillMount",value:function(){this.getHistory()}},{key:"getHistory",value:function(e){var t=e||this.state.curPage,a=this;i.a.httpRequest("wallet/orders",{Type:3,Page:t,PageSize:10},function(e){if(0==e.Status){var t=e.Data;a.setState({historyList:t,curPage:t.Page})}},this)}},{key:"componentWillReceiveProps",value:function(e){var t=e.refresh;this.refresh!=t&&(this.refresh=t,this.getHistory()),this.CoinsMap||(this.CoinsMap=e.coinsMap),this.safeBind=e.safe}},{key:"getProductName",value:function(e){if(this.CoinsMap)return this.CoinsMap[e].Code}},{key:"turnPage",value:function(e){this.getHistory(e)}},{key:"popVerify",value:function(e){h.a.open(c.a.createElement(P,{order:e,safe:this.safeBind,onChange:this.refreshHistory.bind(this)}),"receive_transfer")}},{key:"refreshHistory",value:function(){this.getHistory(),this.props.onChange()}},{key:"compareTime",value:function(e){return Date.parse(new Date(e))/1e3+1800-parseInt((new Date).getTime()/1e3)<1}},{key:"expiredTime",value:function(e){var t=!0;return 0==e.Status&&3006==e.Action&&(t=this.compareTime(e.CreateTime)),t}},{key:"render",value:function(){var e=this,t=this.state.historyList,a=this;return c.a.createElement("div",{className:"record_right pos-r"},c.a.createElement("div",{className:"historical"},c.a.createElement("h4",null,N.a.lang("Recharge.log"))),c.a.createElement("div",{className:"trade-order-log pos-r transfer-log-box"},c.a.createElement("dl",{className:"log-title flex-box dl-12 f-clear"},c.a.createElement("dd",null,N.a.lang("Recharge.orderNum")),c.a.createElement("dd",null,N.a.lang("accountSafe.1_102")),c.a.createElement("dd",null,N.a.lang("Transfer.asset.text2")),c.a.createElement("dd",null,N.a.lang("Transfer.asset.text3")),c.a.createElement("dd",null,N.a.lang("Transfer.asset.text4")),c.a.createElement("dd",null,N.a.lang("Transfer.asset.text5")),c.a.createElement("dd",null,N.a.lang("Transfer.asset.text6")),c.a.createElement("dd",null,N.a.lang("recharge.1_23"))),c.a.createElement("div",{className:"log-contain log-list"},!t&&!t.length&&c.a.createElement("p",{className:"mt-30 tc"},N.a.lang("bank.1_27")),t.hasOwnProperty("Total")&&t.Total>0&&t.List.map(function(t,r){var n=a.getProductName(t.Currency),l=a.getProductName(t.Target),s=t;s.fromCode=n,s.toCode=l;var o=a.expiredTime(t);return c.a.createElement("dl",{className:"dl-12 flex-box f-clear",key:r},c.a.createElement("dd",null,t.Id),c.a.createElement("dd",null,t.CreateTime.substring(0,16)),c.a.createElement("dd",null,n),c.a.createElement("dd",null,t.Amount),c.a.createElement("dd",null,t.TargetUid),c.a.createElement("dd",null,l),c.a.createElement("dd",null,t.TargetAmount),o?c.a.createElement("dd",null,N.a.lang("TRANSFER.STATUS."+t.Status)):c.a.createElement("dd",{className:"blue cursor",onClick:function(){return e.popVerify(s)}},N.a.lang("Transfer.status.confirm")))}),t.hasOwnProperty("PageCount")&&t.PageCount>1&&c.a.createElement(g.a,{className:"pagePos",data:t,onChange:this.turnPage.bind(a),style:{bottom:"-45px"}}))))}}]),t}(o.a),P=function(e){function t(e){r(this,t);var a=n(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.leftTimer=null,a.state={Expired:!1},a}return l(t,e),b(t,[{key:"componentWillUnmount",value:function(){this.clearTimer(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"componentWillUnmount",this).call(this)}},{key:"componentDidMount",value:function(){this.compareTime()}},{key:"compareTime",value:function(){var e=this,t=this.props.order,a=Date.parse(new Date(t.CreateTime))/1e3,r=parseInt((new Date).getTime()/1e3),n=a+1800,l=n-r;if(l<1)return this.orderExpired(),!1;this.leftTimer=setInterval(function(){e.countDown(l,e),l--},1e3),this.countDown(l,this)}},{key:"countDown",value:function(e,t){var a=function(e){return e<10&&(e="0"+e),e};if(e<1)return t.orderExpired(!0),void t.clearTimer();var r=parseInt(e/60%60,10),n=parseInt(e%60,10);r=a(r),n=a(n),t.refs["limit-time"].innerHTML=N.a.lang("Transfer.expire_time",r,n)}},{key:"orderExpired",value:function(e){var t=this;this.refs["limit-time"].innerHTML="",this.setState({Expired:!0}),e&&setTimeout(function(){t.props.onChange(),t.closeConfirm()},1e3)}},{key:"clearTimer",value:function(){clearInterval(this.leftTimer),this.leftTimer=null}},{key:"popVerify",value:function(e){var t=this;e.stopPropagation(),e.preventDefault(),h.a.open(c.a.createElement(E.default,{path:"disTips",verify:"normal",onChange:function(e){return t.popCallback(e)},datafor:"transfer"}),"simple_lang")}},{key:"popCallback",value:function(e){if("close"==e)return void h.a.close("pn_simple_lang");this.acceptTransfer(e)}},{key:"acceptTransfer",value:function(e){var t=this;e.Id=this.props.order.Id,i.a.httpRequest("wallet/transferAccept",e,function(e){0==e.Status&&(t.props.onChange(),h.a.closeAll(),Object(p.g)(N.a.lang("Transfer.receive_success")))},this)}},{key:"closeConfirm",value:function(){h.a.close()}},{key:"render",value:function(){var e=this.props,t=e.order,a=e.safe,r=this.state.Expired,n=t.Amount+" "+t.fromCode,l=t.TargetAmount+" TD";return c.a.createElement("div",{className:"normal-head",id:"receive_transfer"},c.a.createElement("div",{className:"transfer-confirm-con"},c.a.createElement("div",{className:"transfer-confirm-header"},c.a.createElement("div",{className:"w-60"},"\xa0"),c.a.createElement("div",null,N.a.lang("Transfer.status.confirm")),c.a.createElement("div",{onClick:this.closeConfirm.bind(this),className:"iconfont icon-close transit"})),c.a.createElement("div",{className:"pd-10 tc blue1"},c.a.createElement("span",{ref:"limit-time"})),c.a.createElement("ul",{className:"transfer-confirm-header transfer-confirm-content"},c.a.createElement("li",null,N.a.lang("Recharge.orderNum"),N.a.lang("common.symbol.colon")),c.a.createElement("li",null,t.Id)),c.a.createElement("ul",{className:"transfer-confirm-header transfer-confirm-content"},c.a.createElement("li",null,N.a.lang("Transfer.order.targetUid"),N.a.lang("common.symbol.colon")),c.a.createElement("li",null,t.TargetUid)),c.a.createElement("ul",{className:"transfer-confirm-header transfer-confirm-content"},c.a.createElement("li",null,N.a.lang("Transfer.order.targetEmail"),N.a.lang("common.symbol.colon")),c.a.createElement("li",null,t.TargetEmail)),c.a.createElement("ul",{className:"transfer-confirm-header transfer-confirm-content"},c.a.createElement("li",null,N.a.lang("Transfer.order.pay_num"),N.a.lang("common.symbol.colon")),c.a.createElement("li",null,n)),c.a.createElement("ul",{className:"transfer-confirm-header transfer-confirm-content"},c.a.createElement("li",null,N.a.lang("Transfer.order.get_num"),N.a.lang("common.symbol.colon")),c.a.createElement("li",null,l)),r?c.a.createElement("div",{className:"transfer-confirm-btn btnDis"},N.a.lang("Transfer.order.expired")):a?c.a.createElement("div",{className:"transfer-confirm-btn",onClick:this.popVerify.bind(this)},N.a.lang("Transfer.status.confirm")):c.a.createElement("div",{className:"transfer-confirm-btn btnDis"},N.a.lang("Transfer.status.confirm")),c.a.createElement("div",{className:"transfer-confirm-tips mt-20"},c.a.createElement("p",null,N.a.lang("Recharge.tips"),N.a.lang("common.symbol.colon")),c.a.createElement("p",{className:"warn lh-22"},N.a.lang("Transfer.order.tips",t.TargetEmail,l,n,"30"))),!a&&c.a.createElement("div",{className:"tc mt-20"},c.a.createElement("a",{href:"/personal",className:"green4 fs14 cursor pdl-20"},N.a.lang("Withdrawals.119")))))}}]),t}(o.a)}});