webpackJsonp([24],{107:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function r(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(0),s=a.n(c),o=a(24),i=a(7),u=a(9),d=(a(25),a(27)),m=a(15),h=a(26),p=a(147),f=a(5),g=a(135),E=a.n(g),y=a(148),v=a.n(y),b=a(130),N=a(16),P=a(138),_=(a.n(P),a(2)),w="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),C=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.query=0,a.Products=[],a.state={Codes:"",balance:null,addressList:[],showPro:!1,showLog:!1},a}return r(t,e),k(t,[{key:"queryHandle",value:function(){var e=this.props.location.query,t=e.currency;if(this.query==t)return!1;this.query=t}},{key:"componentWillMount",value:function(){this.queryHandle(),this.loadCodesList()}},{key:"loadCodesList",value:function(){var e=d.a.getProductCoins(),t=this;e?this.saveProducts(e):d.a.loadProductCoins(null,function(e){e&&t.saveProducts(e.List)},this)}},{key:"saveProducts",value:function(e){if(this.Products=d.a.filterProducts(e,1),this.Products&&this.Products.length){var t=this.Products[0];this.query?t=this.setProduct(this.query):this.setProduct(t.Id),this.getWalletBalance(t.Id)}}},{key:"setProduct",value:function(e){var t={};for(var a in this.Products){if(e==this.Products[a].Id){t=this.Products[a];break}}return this.setState({Codes:t}),t}},{key:"getWalletBalance",value:function(e){var t=this;u.a.httpRequest("wallet/balance",{Currency:Number(e),Type:Number(N.a.WALLET.TYPE.SPOT)},function(e){if(0==e.Status){var a=e.Data;t.setState({balance:a,showPro:!1})}else t.setState({balance:null})},this)}},{key:"changeProduct",value:function(e){if(e==this.state.Codes.Id)return!1;this.setProduct(e),this.getWalletBalance(e),i.a.replace({pathname:"/recharge",query:{currency:e}})}},{key:"toggleProduct",value:function(e){e.stopPropagation(),this.setState({showPro:!this.state.showPro})}},{key:"closeProduct",value:function(e){e.stopPropagation(),this.state.showPro&&this.setState({showPro:!1})}},{key:"walletCounts",value:function(e){var t=0,a=0,n=0;return e&&(a=Number(m.a.accAdd(e.Lock,m.a.accAdd(m.a.accAdd(e.Transfer,e.Deposit),e.Withdraw))),t=Number(m.a.accAdd(a,m.a.accSubtr(e.Quantity,e.Unconfirm))),n=t>0?Number(e.Quantity):0),{Counts:t,Freeze:a,canUse:n}}},{key:"showLog",value:function(e){this.setState({showLog:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.balance,n=t.Codes,l=t.showPro,r=t.showLog,c="0.0000",o="0.0000",i="0.0000",u="";if(a){var d=this.walletCounts(a);c=m.a.format(d.Counts,4).toString(),o=m.a.format(d.Freeze,4).toString(),i=m.a.format(d.canUse,4).toString()}return n&&(u=n.Code),s.a.createElement("div",{className:"inside-page-web",onClick:function(t){return e.closeProduct(t)}},s.a.createElement("div",{className:"inside-web-part"},s.a.createElement("div",{className:"withdrawal"},s.a.createElement("div",{className:"w-head-top m-head-top"},s.a.createElement("h3",{onClick:function(){return e.showLog(!1)},className:"fl "+(r?"m-under-l":"")},_.a.lang("account.1_2")),s.a.createElement("h3",{onClick:function(){return e.showLog(!0)},className:"pc-hide fr "+(r?"":"m-under-l")},_.a.lang("Recharge.log"))),s.a.createElement("div",{className:0==r?"currency_left":"currency_left m-hide"},s.a.createElement("div",{className:"select",onClick:function(t){return e.toggleProduct(t)}},s.a.createElement("div",{className:"currency_pic"}),s.a.createElement("div",{className:"currency_text"},s.a.createElement("h4",null,u)),s.a.createElement("div",{className:"triangle"},s.a.createElement("i",{className:0==l?"iconfont icon-dropDown c-8":"iconfont icon-dropUp c-8"}))),l&&s.a.createElement("div",{className:"select_option"},s.a.createElement("ul",null,s.a.createElement("li",{className:"h-50 tc hide"},s.a.createElement("div",{className:"select_option_ipt"},s.a.createElement("input",{type:"text",placeholder:""}))),this.Products&&this.Products.map(function(t,a){return s.a.createElement("li",{key:a,onClick:function(){return e.changeProduct(t.Id)}},s.a.createElement("div",{className:"currency_pic"}),s.a.createElement("div",{className:"currency_text"},s.a.createElement("h4",null,t.Code)))}),!this.Products.length&&s.a.createElement("li",{className:"tc"},s.a.createElement("div",{className:"currency_text c-8"},s.a.createElement("h4",null,_.a.lang("common.not_open")))))),s.a.createElement("div",{className:"calculate"},s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("p",null,_.a.lang("recharge.total"))),s.a.createElement("li",null,s.a.createElement("p",null,_.a.lang("Asset.100"))),s.a.createElement("li",null,s.a.createElement("p",null,_.a.lang("recharge.canUse")))),s.a.createElement("ul",null,s.a.createElement("li",{className:"calculate_text"},s.a.createElement("p",null,c+" "+u)),s.a.createElement("li",{className:"calculate_text"},s.a.createElement("p",null,o+" "+u)),s.a.createElement("li",{className:"calculate_text"},s.a.createElement("p",null,i+" "+u)))),s.a.createElement(S,{product:n}),s.a.createElement("div",{className:"attention"},s.a.createElement("h4",null,_.a.lang("Recharge.tips")),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("p",null,_.a.lang("Recharge.tips_1",u,n.Confirmations||"0"))),s.a.createElement("li",null,s.a.createElement("p",{dangerouslySetInnerHTML:{__html:_.a.lang("Recharge.tips_2")}}))))),s.a.createElement("div",{className:1==!r?"m-hide":null},s.a.createElement(L,{product:n})))))}}]),t}(o.a);t.default=C;var S=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.Codes=null,a.state={addressList:[],qrShow:!1},a}return r(t,e),k(t,[{key:"componentWillMount",value:function(){var e=this.props.product;e&&e.Id&&(this.Codes=e,this.loadWalletAddress(e.Id))}},{key:"componentDidMount",value:function(){var e=new v.a(".copy_link_btn");e.on("success",function(e){Object(f.g)(_.a.lang("Recharge.120"),0,1e3)}),e.on("error",function(e){console.log(e)}),this.clipboard=e}},{key:"componentWillReceiveProps",value:function(e){var t=e.product;this.Codes!=t&&t&&(this.Codes=t,this.loadWalletAddress(t))}},{key:"componentWillUnmount",value:function(){this.clipboard.destroy()}},{key:"loadWalletAddress",value:function(e){var t="object"===("undefined"===typeof e?"undefined":w(e))?e:this.props.product,a={},n="post";e?a={Type:1,Currency:Number(t.Id),Target:Number(t.Id)}:(a={Currency:Number(t.Id),Target:Number(t.Id)},n="put");var l=this;u.a.httpRequest("wallet/address",a,function(e){if(0==e.Status){var t=e.Data.List,a=t||[];l.setState({addressList:a})}},this,n)}},{key:"getWalletAddress",value:function(e){if(!e)return Object(f.g)(_.a.lang("common.not_open"),!0),!1;var t=this;h.a.open(s.a.createElement(p.a,{title:_.a.lang("Recharge.104"),content:_.a.lang("Recharge.recover",3),callback:function(){return t.loadWalletAddress()}}),"alert_panel")}},{key:"showQrcode",value:function(e){this.setState({qrShow:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.addressList,n=t.qrShow,l=this.props.product,r="",c="";return l&&(c=l.Code),a.length&&(r=a[0].Address),s.a.createElement("div",{className:"Withdrawal_form"},s.a.createElement("h4",null,_.a.lang("Recharge.note")),s.a.createElement("ul",null,s.a.createElement("li",null,s.a.createElement("p",null,_.a.lang("Recharge.note_1",c)))),s.a.createElement("div",{className:"hide"},s.a.createElement("div",{className:"recharge-warn"},s.a.createElement("i",{className:"iconfont icon-warn fem125"}),s.a.createElement("span",null,"\u6ce8\u610f\uff1a\u5907\u6ce8\u548c\u5730\u5740\u540c\u65f6\u4f7f\u7528\u624d\u80fd\u5145\u503c",c,"\u5230TDEx")),s.a.createElement("label",{className:"custom-checkbox"},s.a.createElement("div",null,s.a.createElement("input",{type:"checkbox",name:"clients",className:"input_check",value:_.a.lang("questionnaire.item.19")[0]}),s.a.createElement("i",null)),s.a.createElement("span",null,"\u6211\u5df2\u77e5\u6653\uff0c\u56e0\u9057\u6f0f\u5907\u6ce8\u5bfc\u81f4\u8d44\u91d1\u4e22\u5931\u5c06\u65e0\u6cd5\u627e\u56de\u3002")),s.a.createElement("div",{className:"btn_box"},s.a.createElement("div",{className:"btn"},"\u7ee7\u7eed\u5145\u503c"))),s.a.createElement("div",{className:"input_box"},s.a.createElement("h5",null,c," ",_.a.lang("Recharge.103")),s.a.createElement("div",{className:"address"},s.a.createElement("textarea",{readOnly:"readonly",value:r,id:"copy_invit_text"}))),r?s.a.createElement("div",{className:"btn_box"},s.a.createElement("div",{className:"btn",onClick:function(){return e.showQrcode(!0)}},_.a.lang("Recharge.show_qrCode")),s.a.createElement("div",{className:"btn"},s.a.createElement("span",{className:"copy_link_btn","data-clipboard-action":"copy","data-clipboard-target":"#copy_invit_text"},_.a.lang("Recharge.copy")))):s.a.createElement("div",{className:"btn_box"},s.a.createElement("div",{className:l?"btn":"btn btnNotAllow",onClick:function(){return e.getWalletAddress(c)}},_.a.lang("Recharge.104"))),r&&s.a.createElement("div",{className:"recharge-qrBg",style:n?null:{display:"none"}},s.a.createElement("div",{className:"recharge-qr-box"},s.a.createElement("div",{className:"qr-close",onClick:function(){return e.showQrcode(!1)}},s.a.createElement("i",{className:"iconfont icon-close fs12"})),s.a.createElement("div",{className:"qr-title"},_.a.lang("Recharge.address",c)),s.a.createElement(E.a,{value:r,size:200}),s.a.createElement("div",{className:"qr-txt"},r))))}}]),t}(o.a),L=function(e){function t(e){n(this,t);var a=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.product=null,a.state={curPage:1,historyList:{List:[],PageSize:10}},a}return r(t,e),k(t,[{key:"getHistory",value:function(e){var t=e||this.state.curPage,a=this.product.Id;if(!a)return!1;var n=this;u.a.httpRequest("wallet/orders",{Currency:Number(a),Type:1,Page:t,PageSize:10},function(e){if(0==e.Status){var t=e.Data;n.setState({historyList:t,curPage:t.Page})}},this)}},{key:"componentWillReceiveProps",value:function(e){this.product&&this.product.Id==e.product.Id||(this.product=e.product,this.getHistory())}},{key:"turnPage",value:function(e){this.getHistory(e)}},{key:"render",value:function(){var e=this.state.historyList,t=this.props.product,a=this;return s.a.createElement("div",{className:"record_right pos-r"},s.a.createElement("div",{className:"historical"},s.a.createElement("h4",null,_.a.lang("Recharge.log"))),s.a.createElement("div",{className:"trade-order-log"},s.a.createElement("dl",{className:"log-title dl-25 f-clear"},s.a.createElement("dd",null,_.a.lang("accountSafe.1_102")),s.a.createElement("dd",null,_.a.lang("Asset.105")),s.a.createElement("dd",null,_.a.lang("tradeHistory.1_9")),s.a.createElement("dd",null,_.a.lang("recharge.1_23"))),s.a.createElement("div",{className:"log-contain log-list"},!e&&!e.length&&s.a.createElement("p",{className:"mt-30 tc"},_.a.lang("bank.1_27")),e.hasOwnProperty("Total")&&e.Total>0&&e.List.map(function(e,a){return s.a.createElement("dl",{className:"dl-25 f-clear",key:a},s.a.createElement("dd",null,e.CreateTime.substring(0,16)),s.a.createElement("dd",null,t.Code),s.a.createElement("dd",null,e.Amount),s.a.createElement("dd",null,_.a.lang("EXCHANGE.STATUS."+e.Status)))}),e.hasOwnProperty("PageCount")&&e.PageCount>1&&s.a.createElement(b.a,{className:"pagePos",data:e,onChange:this.turnPage.bind(a)}))))}}]),t}(o.a)}});