webpackJsonp([32],{101:function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function i(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=a(2),o=a(0),s=a.n(o),c=a(7),u=a(25),m=a(24),d=a(9),p=a(12),f=a(194),g=a(195),h=a(5),b=a(132),E=a(196),v=(a.n(E),function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}()),y=function(e){function t(e){n(this,t);var a=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.inputsMap={email:{placeholder:function(){return l.a.lang("accountSafe.2_142")},isRequired:!0,validator:function(e){return b.a.email(e)}}},a.inputs=Object.keys(a.inputsMap),a.data={},a.inputValid={},a.state={error:"",disable:!a.onValidForm(),isSend:!1},a}return i(t,e),v(t,[{key:"onChange",value:function(e,t,a){if(this.data[e]=t,this.inputValid[e]!=a){this.inputValid[e]=a;var n=!this.onValidForm();n!=this.state.disable&&this.setState({disable:n})}}},{key:"onValidForm",value:function(){return!!this.inputValid.email}},{key:"onInputError",value:function(e,t){t?"empty"==t?this.setState({error:"form.error.empty"}):this.setState({error:"error."+e+"."+t}):this.setState({error:""})}},{key:"handleSubmit",value:function(e,t){var a={Email:this.data.email,GeetestChallenge:e.geetest_challenge,GeetestValidate:e.geetest_validate,GeetestSeccode:e.geetest_seccode},n=this;d.a.httpRequest("user/forget",a,function(e){if(0==e.Status){t&&t(!0);var a=e.Data;a?(p.a.registerAfter(e),a.Email=n.data.email,c.a.replace("/emailVerification")):n.setState({isSend:!0})}else t&&t(!1),e.Data?n.setState({error:Object(h.d)(e.Error,e.Data)}):e.Error&&n.setState({error:e.Error})},this,"put")}},{key:"render",value:function(){var e=this,t=this.state,a=t.isSend,n=t.error,r=!this.onValidForm();return a?s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login-box"},s.a.createElement("form",{className:"login-web email-regist-box"},s.a.createElement("div",{className:"tc fem-175 login-title"},s.a.createElement("span",{className:"logo"}),s.a.createElement("span",{className:"pdl-10"},l.a.lang("forgot.title"))),s.a.createElement("div",{className:"land_text send-txt"},s.a.createElement("p",null,l.a.lang("forgot.resetPassword.sended"))),s.a.createElement("div",{className:"email_list_conten",dangerouslySetInnerHTML:{__html:l.a.lang("register.emailVerification.tip")}}),s.a.createElement("div",{className:"w-300 mg-md pdb-50 fs12 f-clear"},s.a.createElement(u.Link,{to:"/login",className:"gold cursor fr"},l.a.lang("activateSucc.1_6")))))):s.a.createElement("div",{className:"login"},s.a.createElement("div",{className:"login-box"},s.a.createElement("h3",null,l.a.lang("forgot.title")),s.a.createElement("div",{className:"login-input-box"},s.a.createElement("form",{autoComplete:"off"},this.inputs&&this.inputs.map(function(t,a){var r=e.inputsMap[t];return s.a.createElement("div",{className:"login-input-text",key:a},s.a.createElement(g.a,Object.assign({key:a,onChange:e.onChange.bind(e,t),onError:e.onInputError.bind(e,t)},r)),n&&s.a.createElement("p",{className:"input-error"},s.a.createElement("i",{className:"iconfont icon-tips"}),l.a.lang(n)))}),s.a.createElement(f.a,{onSuccess:this.handleSubmit.bind(this),onValidForm:this.onValidForm.bind(this),width:"100%",disable:r,type:"forgotPassword"},s.a.createElement("button",{type:"submit",className:"active"},l.a.lang("common.confirm")))),s.a.createElement("div",{className:"login-input-right-text"},s.a.createElement("p",null,l.a.lang("login.tips.1")),s.a.createElement("p",null,l.a.lang("login.tips.2")),s.a.createElement(u.Link,{to:"/login",className:"text-action"},l.a.lang("activateSucc.1_6")),s.a.createElement(u.Link,{to:"/register",className:"text-action"},l.a.lang("register.title"))))))}}]),t}(m.a);t.default=y}});