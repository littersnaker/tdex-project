webpackJsonp([35],{99:function(e,t,a){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function n(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=a(2),l=a(0),o=a.n(l),c=a(25),u=a(7),m=a(24),f=a(9),d=a(12),v=a(5),p=function(){function e(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,a,r){return a&&e(t.prototype,a),r&&e(t,r),t}}(),g=function(e){function t(e){r(this,t);var a=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.resendEmail=function(e){e.preventDefault(),e.stopPropagation();var t="";if(a.isMobile){if(a.sendTimer)return!1;t={IsMobile:!0}}f.a.httpRequest("user/activate",t,function(e){0==e.Status?(console.log(e),Object(v.g)(s.a.lang("register.emailVerification.sendok")),e.Data&&e.Data.ActivateUrl&&a.setState({ActivateUrl:e.Data.ActivateUrl}),e.Data&&e.Data.ActivateCode&&a.setState({ActivateCode:e.Data.ActivateCode}),a.isMobile&&a.freeTime()):Object(v.g)(e.Error,!0)},a,"put")},a.isMobile=a.props.isMobile,a.sendTimer=null,a.timeCount=120,a.unitTxt=s.a.lang("trade.price.sec"),a.state=d.a.getRegisterData(),a}return n(t,e),p(t,[{key:"componentWillMount",value:function(){this.isMobile&&this.setState({text:s.a.lang("register.emailVerification.resend")})}},{key:"componentWillUnmount",value:function(){clearInterval(this.sendTimer)}},{key:"freeTime",value:function(){var e=this;this.sendTimer&&clearInterval(this.sendTimer);var t=this.timeCount,a=this;this.sendTimer=setInterval(function(){if(--t<=0)return clearInterval(a.sendTimer),a.sendTimer=0,void a.setState({text:s.a.lang("register.emailVerification.resend"),timer:!1});a.setState({text:Object(v.b)(e.unitTxt,t),timer:!0})},1e3)}},{key:"activateRegister",value:function(){var e=this,t=this.state.Email,a=this.refs.activateCode.value;if(!t)return!1;if(!a||!/^[0-9]{6}$/.test(a))return this.setState({error:s.a.lang("activate.input")}),!1;var r={Email:t,Code:a};f.a.httpRequest("user/activate",r,function(t){0==t.Status||10013==t.Status?(e.userInfo=t.Data,d.a.registerAfter(t),u.a.replace("/activate")):t.Data?e.setState({activate:!0,error:Object(v.d)(t.Error,t.Data)}):e.setState({activate:!0,error:t.Error})},this)}},{key:"render",value:function(){var e=this.state,t=e.Uid,a=e.Email,r=e.ActivateUrl,i=e.Verify,n=(e.error,e.ActivateCode,e.text,e.timer,t?i?"login.unactivate":"register.emailVerification.sended":"forgot.resetPassword.sended");return o.a.createElement("div",{className:"register-contain pos-r"},o.a.createElement("div",{className:"contain pdt-72"},o.a.createElement("form",{className:"login-web email-regist-box mt-80"},o.a.createElement("div",{className:"emailVerification_web"},o.a.createElement("div",{className:"emailVerification"},o.a.createElement("div",{className:"tc fem-175 login-title"},o.a.createElement("span",{className:"logo"}),o.a.createElement("span",{className:"pdl-10"},s.a.lang("register.emailVerification"))),o.a.createElement("div",{className:"land_text send-txt"},o.a.createElement("p",{dangerouslySetInnerHTML:{__html:s.a.lang(n,a)}}),r&&o.a.createElement("a",{href:r,target:"_blank",className:"yellow fs12 cursor"},s.a.lang("register.activation")),t&&o.a.createElement("p",null,o.a.createElement("a",{href:"javascrpt::",className:"yellow fs12 current",onClick:this.resendEmail},s.a.lang("register.emailVerification.resend")))),o.a.createElement("div",{className:"email_list_conten",dangerouslySetInnerHTML:{__html:s.a.lang("register.emailVerification.tip")}})),o.a.createElement("div",{className:"w-300 mg-md pdb-50 fs12 f-clear"},o.a.createElement(c.Link,{to:"/login",className:"gold cursor fr"},s.a.lang("activateSucc.1_6")))))))}}]),t}(m.a);t.default=g}});